<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.47">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Ravi Shankar">

<title>understanding_user_needs – Data Down To Earth</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../../">
<link href="../../../logo.png" rel="icon" type="image/png">
<script src="../../../site_libs/quarto-html/quarto.js"></script>
<script src="../../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="../../../styles.css">
<link rel="stylesheet" href="../../content.css">
<meta property="og:title" content="– Data Down To Earth">
<meta property="og:site_name" content="Data Down To Earth">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a href="../../../index.html" class="navbar-brand navbar-brand-logo">
    <img src="../../../logo.png" alt="" class="navbar-logo">
    </a>
    <a class="navbar-brand" href="../../../index.html">
    <span class="navbar-title">Data Down To Earth</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../../about.html"> 
<span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-projects" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Projects</span>
    </a>
    <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="nav-menu-projects">    
        <li>
    <a class="dropdown-item" href="../../../projects/dsml_projects.html">
 <span class="dropdown-text">Data Science and ML Projects</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../../projects/genai_projects.html">
 <span class="dropdown-text">Generative AI Projects</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-tutorials" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Tutorials</span>
    </a>
    <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="nav-menu-tutorials">    
        <li>
    <a class="dropdown-item" href="../../../topics/statistics.html">
 <span class="dropdown-text">Statistics &amp; Probability</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../../topics/machine_learning.html">
 <span class="dropdown-text">Machine Learning</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../../topics/de.html">
 <span class="dropdown-text">Data Engineering</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../../topics/generative_ai.html">
 <span class="dropdown-text">Generative AI</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../../topics/public_health.html">
 <span class="dropdown-text">Public Health</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../../topics/product_sense.html">
 <span class="dropdown-text">Product Sense</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="../../../blogs/blogs.html"> 
<span class="menu-text">Blog</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/iamrsps"> <i class="bi bi-github" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://www.linkedin.com/in/iamravishankar/"> <i class="bi bi-linkedin" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-full page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content column-page" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
</div>



<div class="quarto-title-meta column-page">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Ravi Shankar </p>
          </div>
  </div>
    
  
    
  </div>
  


</header>


<div class="text-content">
<section id="chapter-2.-understanding-user-needs" class="level3">
<h3 class="anchored" data-anchor-id="chapter-2.-understanding-user-needs">Chapter 2. Understanding User Needs</h3>
</section>
<section id="understanding-user-needs" class="level2">
<h2 class="anchored" data-anchor-id="understanding-user-needs">Understanding User Needs</h2>
<p>Understanding user needs is a critical aspect of product development and user experience design. It involves identifying, analyzing, and interpreting the requirements, preferences, and pain points of target users to create products or services that effectively meet their expectations.</p>
<p>Key aspects of understanding user needs include:</p>
<ol type="1">
<li><strong>Empathy</strong>: Putting yourself in the users’ shoes to understand their perspective</li>
<li><strong>Context</strong>: Considering the environment and circumstances in which users interact with the product</li>
<li><strong>Goals</strong>: Identifying what users are trying to achieve</li>
<li><strong>Pain points</strong>: Recognizing challenges or frustrations users face</li>
<li><strong>Behaviors</strong>: Observing how users currently accomplish tasks or solve problems</li>
</ol>
<section id="importance-of-understanding-user-needs" class="level3">
<h3 class="anchored" data-anchor-id="importance-of-understanding-user-needs">Importance of Understanding User Needs</h3>
<ul>
<li><strong>Product relevance</strong>: Ensures the product addresses real user problems</li>
<li><strong>User satisfaction</strong>: Leads to higher user satisfaction and loyalty</li>
<li><strong>Resource efficiency</strong>: Helps prioritize features and allocate resources effectively</li>
<li><strong>Competitive advantage</strong>: Differentiates products in the market</li>
<li><strong>Innovation</strong>: Uncovers opportunities for novel solutions</li>
</ul>
</section>
<section id="methods-for-understanding-user-needs" class="level3">
<h3 class="anchored" data-anchor-id="methods-for-understanding-user-needs">Methods for Understanding User Needs</h3>
<ol type="1">
<li><strong>Desk research</strong>: Analyzing existing data, reports, and industry trends</li>
<li><strong>User interviews</strong>: Direct conversations with users to gather insights</li>
<li><strong>Surveys</strong>: Collecting structured feedback from a large number of users</li>
<li><strong>Observation</strong>: Watching users interact with products in their natural environment</li>
<li><strong>Usability testing</strong>: Evaluating how users interact with prototypes or existing products</li>
</ol>
<p>Understanding user needs is an ongoing process that should be revisited throughout the product lifecycle to ensure continued alignment with user expectations and evolving market conditions[1].</p>
</section>
</section>
<section id="user-research-methods" class="level2">
<h2 class="anchored" data-anchor-id="user-research-methods">User Research Methods</h2>
<p>User research methods are techniques used to gather insights about users, their behaviors, needs, and preferences. Three common methods are surveys, interviews, and focus groups.</p>
<section id="surveys" class="level3">
<h3 class="anchored" data-anchor-id="surveys">Surveys</h3>
<p>Surveys are structured questionnaires designed to collect data from a large number of participants.</p>
<p><strong>Pros</strong>: - Can reach a large audience quickly - Provide quantitative data for statistical analysis - Cost-effective for large sample sizes</p>
<p><strong>Cons</strong>: - Limited depth of insights - Risk of biased questions or responses - No opportunity for follow-up questions</p>
<p><strong>Best practices</strong>: - Keep surveys concise and focused - Use clear, unambiguous language - Include a mix of closed and open-ended questions - Test the survey before full deployment</p>
</section>
<section id="interviews" class="level3">
<h3 class="anchored" data-anchor-id="interviews">Interviews</h3>
<p>Interviews involve one-on-one conversations with users to gather in-depth insights.</p>
<p><strong>Pros</strong>: - Provide rich, qualitative data - Allow for follow-up questions and clarifications - Can uncover unexpected insights</p>
<p><strong>Cons</strong>: - Time-consuming to conduct and analyze - Potential for interviewer bias - Smaller sample size compared to surveys</p>
<p><strong>Best practices</strong>: - Prepare a semi-structured interview guide - Create a comfortable environment for the interviewee - Use open-ended questions to encourage detailed responses - Record interviews (with permission) for accurate analysis</p>
</section>
<section id="focus-groups" class="level3">
<h3 class="anchored" data-anchor-id="focus-groups">Focus Groups</h3>
<p>Focus groups involve moderated discussions with small groups of users.</p>
<p><strong>Pros</strong>: - Generate diverse perspectives through group interaction - Efficient for gathering multiple viewpoints simultaneously - Can stimulate new ideas through discussion</p>
<p><strong>Cons</strong>: - Risk of groupthink or dominant personalities influencing responses - Challenging to schedule and coordinate - May not be suitable for sensitive topics</p>
<p><strong>Best practices</strong>: - Carefully select a diverse group of participants - Use skilled moderators to guide the discussion - Encourage equal participation from all members - Combine with other research methods for comprehensive insights</p>
<p>When selecting a research method, consider factors such as research goals, available resources, target audience, and the type of data required. Often, a combination of methods yields the most comprehensive understanding of user needs[2][4].</p>
</section>
</section>
<section id="creating-user-personas" class="level2">
<h2 class="anchored" data-anchor-id="creating-user-personas">Creating User Personas</h2>
<p>User personas are fictional representations of key user segments, based on research data and insights. They help teams develop empathy for users and make user-centered design decisions.</p>
<section id="steps-to-create-user-personas" class="level3">
<h3 class="anchored" data-anchor-id="steps-to-create-user-personas">Steps to Create User Personas</h3>
<ol type="1">
<li><p><strong>Gather research data</strong>: Collect insights from user interviews, surveys, analytics, and other research methods.</p></li>
<li><p><strong>Identify patterns</strong>: Look for common characteristics, behaviors, and goals among users.</p></li>
<li><p><strong>Create persona groups</strong>: Segment users based on significant differences in needs, behaviors, or demographics.</p></li>
<li><p><strong>Develop persona details</strong>: For each persona, include:</p>
<ul>
<li>Name and photo (fictional but representative)</li>
<li>Demographics (age, occupation, location, etc.)</li>
<li>Goals and motivations</li>
<li>Pain points and frustrations</li>
<li>Behaviors and preferences</li>
<li>Quotes that capture their attitude</li>
</ul></li>
<li><p><strong>Validate personas</strong>: Review personas with stakeholders and refine based on feedback.</p></li>
<li><p><strong>Use and update</strong>: Regularly refer to personas during design decisions and update them as new insights emerge.</p></li>
</ol>
</section>
<section id="benefits-of-user-personas" class="level3">
<h3 class="anchored" data-anchor-id="benefits-of-user-personas">Benefits of User Personas</h3>
<ul>
<li><strong>Shared understanding</strong>: Create a common reference point for teams</li>
<li><strong>User-centered design</strong>: Keep user needs at the forefront of decision-making</li>
<li><strong>Prioritization</strong>: Help prioritize features and improvements</li>
<li><strong>Communication</strong>: Facilitate discussions about user needs with stakeholders</li>
</ul>
</section>
<section id="best-practices" class="level3">
<h3 class="anchored" data-anchor-id="best-practices">Best Practices</h3>
<ul>
<li>Base personas on research data, not assumptions</li>
<li>Keep personas concise and focused on relevant information</li>
<li>Create 3-5 personas to represent key user segments</li>
<li>Make personas visually engaging and easily accessible to the team</li>
</ul>
<p>By creating well-researched and thoughtfully crafted user personas, teams can make more informed design decisions and create products that better meet user needs[3].</p>
</section>
</section>
<section id="user-journey-mapping" class="level2">
<h2 class="anchored" data-anchor-id="user-journey-mapping">User Journey Mapping</h2>
<p>User journey mapping is a visual representation of a user’s experience with a product or service over time. It helps teams understand the user’s perspective, identify pain points, and uncover opportunities for improvement.</p>
<section id="components-of-a-user-journey-map" class="level3">
<h3 class="anchored" data-anchor-id="components-of-a-user-journey-map">Components of a User Journey Map</h3>
<ol type="1">
<li><strong>User persona</strong>: The specific user whose journey is being mapped</li>
<li><strong>Stages</strong>: Key phases of the user’s interaction with the product or service</li>
<li><strong>Actions</strong>: Specific steps the user takes at each stage</li>
<li><strong>Thoughts</strong>: What the user is thinking during each action</li>
<li><strong>Emotions</strong>: How the user feels at different points in the journey</li>
<li><strong>Touch points</strong>: Points of interaction between the user and the product/service</li>
<li><strong>Pain points</strong>: Frustrations or obstacles the user encounters</li>
<li><strong>Opportunities</strong>: Potential areas for improvement or innovation</li>
</ol>
</section>
<section id="steps-to-create-a-user-journey-map" class="level3">
<h3 class="anchored" data-anchor-id="steps-to-create-a-user-journey-map">Steps to Create a User Journey Map</h3>
<ol type="1">
<li><strong>Define the scope</strong>: Determine the specific user persona and scenario to map</li>
<li><strong>Gather research data</strong>: Collect insights from user research methods</li>
<li><strong>List user actions</strong>: Identify the steps users take to accomplish their goal</li>
<li><strong>Map the journey</strong>: Arrange actions chronologically and add thoughts, emotions, and touch points</li>
<li><strong>Identify pain points and opportunities</strong>: Highlight areas of frustration and potential improvements</li>
<li><strong>Validate and refine</strong>: Review the journey map with stakeholders and users, and iterate as needed</li>
</ol>
</section>
<section id="benefits-of-user-journey-mapping" class="level3">
<h3 class="anchored" data-anchor-id="benefits-of-user-journey-mapping">Benefits of User Journey Mapping</h3>
<ul>
<li><strong>Holistic view</strong>: Provides a comprehensive understanding of the user experience</li>
<li><strong>Empathy building</strong>: Helps teams see the product from the user’s perspective</li>
<li><strong>Alignment</strong>: Creates a shared understanding among team members and stakeholders</li>
<li><strong>Prioritization</strong>: Identifies critical areas for improvement</li>
<li><strong>Innovation</strong>: Uncovers opportunities for new features or services</li>
</ul>
</section>
<section id="best-practices-1" class="level3">
<h3 class="anchored" data-anchor-id="best-practices-1">Best Practices</h3>
<ul>
<li>Base journey maps on research data, not assumptions</li>
<li>Keep the focus on the user’s perspective, not internal processes</li>
<li>Use visuals to make the journey map engaging and easy to understand</li>
<li>Regularly update journey maps as new insights emerge or the product evolves</li>
</ul>
<p>User journey mapping is a powerful tool for understanding and improving the user experience. By visualizing the entire user journey, teams can make more informed decisions and create products that better meet user needs and expectations[5].</p>
</section>
</section>
<section id="tools-for-user-research-and-surveys" class="level2">
<h2 class="anchored" data-anchor-id="tools-for-user-research-and-surveys">Tools for User Research and Surveys</h2>
<p>Several tools are available to facilitate user research and survey creation. Here are three popular options:</p>
<section id="google-forms" class="level3">
<h3 class="anchored" data-anchor-id="google-forms">Google Forms</h3>
<p><strong>Features</strong>: - Free to use - Easy to create and share surveys - Basic question types and logic - Automatic data collection in Google Sheets</p>
<p><strong>Pros</strong>: - Simple and intuitive interface - Seamless integration with other Google services - Real-time collaboration</p>
<p><strong>Cons</strong>: - Limited advanced features - Basic customization options - Less suitable for complex surveys</p>
</section>
<section id="surveymonkey" class="level3">
<h3 class="anchored" data-anchor-id="surveymonkey">SurveyMonkey</h3>
<p><strong>Features</strong>: - Wide range of question types - Advanced logic and branching - Customizable themes and branding - Robust analytics and reporting</p>
<p><strong>Pros</strong>: - User-friendly interface - Extensive template library - Advanced features for data analysis</p>
<p><strong>Cons</strong>: - Limited features in free plan - Can be expensive for advanced features</p>
</section>
<section id="usertesting" class="level3">
<h3 class="anchored" data-anchor-id="usertesting">UserTesting</h3>
<p><strong>Features</strong>: - Remote user testing platform - Video recordings of user interactions - Customizable test scenarios - Demographic targeting for participants</p>
<p><strong>Pros</strong>: - Access to a large pool of test participants - Qualitative insights from video recordings - Quick turnaround for results</p>
<p><strong>Cons</strong>: - More expensive than traditional survey tools - Primarily focused on usability testing rather than surveys</p>
<p>When choosing a tool, consider factors such as: - Research goals and complexity - Budget constraints - Required features (e.g., question types, logic, analytics) - Integration with existing workflows and tools</p>
<p>Each tool has its strengths and is suited for different research needs. Google Forms is great for simple surveys, SurveyMonkey offers more advanced features for comprehensive surveys, and UserTesting is ideal for observing user interactions and gathering qualitative feedback[4][5].</p>
</section>
</section>
</div>



</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>